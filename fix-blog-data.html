<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fix Blog Data - Espacio Shanti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body class="bg-gray-100">
    <div class="container mx-auto p-8">
      <h1 class="text-3xl font-bold mb-6 text-center text-red-600">
        üîß Blog Data Fixer
      </h1>

      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4 text-orange-600">
          ‚ö†Ô∏è Problema Detectado
        </h2>
        <p class="text-gray-700 mb-4">
          Los datos en localStorage est√°n mal formados (t√≠tulos como "df",
          emojis "undefined", fechas inv√°lidas). Usa los botones de abajo para
          solucionarlo:
        </p>

        <div class="space-y-4">
          <button
            onclick="clearBadData()"
            class="w-full bg-red-500 text-white px-6 py-3 rounded hover:bg-red-600 transition-colors"
          >
            üóëÔ∏è Limpiar Datos Problem√°ticos
          </button>

          <button
            onclick="loadGoodData()"
            class="w-full bg-green-500 text-white px-6 py-3 rounded hover:bg-green-600 transition-colors"
          >
            ‚úÖ Cargar Datos Correctos
          </button>

          <button
            onclick="testBlog()"
            class="w-full bg-blue-500 text-white px-6 py-3 rounded hover:bg-blue-600 transition-colors"
          >
            üîÑ Probar Blog
          </button>
        </div>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">Estado Actual</h2>
        <div class="space-y-2">
          <p>
            <strong>Entradas en localStorage:</strong>
            <span id="entry-count" class="text-blue-600">0</span>
          </p>
          <p>
            <strong>√öltima actualizaci√≥n:</strong>
            <span id="last-update" class="text-gray-600">Nunca</span>
          </p>
        </div>

        <details class="mt-4">
          <summary class="cursor-pointer font-medium text-gray-700">
            Ver Datos Raw
          </summary>
          <pre
            id="raw-data"
            class="bg-gray-100 p-4 rounded mt-2 text-xs overflow-auto max-h-64 whitespace-pre-wrap"
          ></pre>
        </details>
      </div>

      <div class="bg-white rounded-lg shadow-md p-6">
        <h2 class="text-xl font-semibold mb-4">Vista Previa del Blog</h2>
        <div id="blog-preview" class="space-y-4">
          <p class="text-gray-500 italic">
            Los datos del blog aparecer√°n aqu√≠...
          </p>
        </div>
      </div>
    </div>

    <script>
      function clearBadData() {
        localStorage.removeItem("blogEntries");
        updateStatus();
        alert("üóëÔ∏è Datos problem√°ticos eliminados");
      }

      function loadGoodData() {
        const correctData = [
          {
            id: "meditation-benefits",
            title: "Beneficios de la Meditaci√≥n",
            content:
              "La meditaci√≥n diaria puede transformar tu vida de manera profunda. Esta pr√°ctica ancestral nos ayuda a encontrar equilibrio mental, reducir el estr√©s y conectar con nuestro ser interior. En tan solo 10 minutos al d√≠a puedes experimentar cambios significativos en tu bienestar general.",
            author: "ana.maria@espacioshanti.com",
            createdAt: "2025-07-21T10:30:00.000Z",
            category: "meditacion",
            emoji: "üßò‚Äç‚ôÄÔ∏è",
            summary: "Descubre c√≥mo 10 minutos diarios pueden cambiar tu vida",
          },
          {
            id: "reiki-healing",
            title: "El Poder Sanador del Reiki",
            content:
              "El Reiki es una t√©cnica de sanaci√≥n energ√©tica que utiliza la imposici√≥n de manos para canalizar energ√≠a universal. Esta pr√°ctica japonesa milenaria puede ayudarte a liberar bloqueos emocionales, reducir el dolor f√≠sico y promover un estado de relajaci√≥n profunda.",
            author: "Dr. Carlos Mendoza",
            createdAt: "2025-07-20T14:15:00.000Z",
            category: "terapias",
            emoji: "‚ú®",
            summary: "Experimenta la sanaci√≥n a trav√©s de la energ√≠a universal",
          },
          {
            id: "crystal-energy",
            title: "Cristales y su Energ√≠a Transformadora",
            content:
              "Los cristales son herramientas poderosas que nos conectan con las energ√≠as de la Tierra. Cada cristal vibra en una frecuencia √∫nica que puede ayudarnos a sanar diferentes aspectos de nuestra vida f√≠sica, emocional y espiritual. Aprende a elegir y usar cristales.",
            author: "lucia.gonzalez@espacioshanti.com",
            createdAt: "2025-07-19T09:45:00.000Z",
            category: "espiritualidad",
            emoji: "üíé",
            summary: "Descubre el poder energ√©tico de los minerales sagrados",
          },
        ];

        localStorage.setItem("blogEntries", JSON.stringify(correctData));
        updateStatus();
        alert("‚úÖ Datos correctos cargados exitosamente");
      }

      function testBlog() {
        // Intentar regenerar el blog si la funci√≥n est√° disponible
        if (typeof generateBlogCards === "function") {
          generateBlogCards();
          alert("üîÑ Blog regenerado (funci√≥n disponible)");
        } else {
          alert("‚ÑπÔ∏è Ve a la p√°gina principal para ver los cambios");
          // Abrir el index en una nueva pesta√±a
          window.open("/index.html#blog", "_blank");
        }
        updateStatus();
      }

      function updateStatus() {
        const entries = JSON.parse(localStorage.getItem("blogEntries") || "[]");
        document.getElementById("entry-count").textContent = entries.length;
        document.getElementById("last-update").textContent =
          new Date().toLocaleString();
        document.getElementById("raw-data").textContent = JSON.stringify(
          entries,
          null,
          2
        );

        // Mostrar vista previa
        const preview = document.getElementById("blog-preview");
        if (entries.length === 0) {
          preview.innerHTML = '<p class="text-red-500">‚ùå No hay entradas</p>';
        } else {
          preview.innerHTML = entries
            .map(
              (entry) => `
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex items-center space-x-2 mb-2">
                            <span class="text-lg">${entry.emoji || "‚ùì"}</span>
                            <span class="text-sm bg-blue-100 px-2 py-1 rounded">${
                              entry.category || "Sin categor√≠a"
                            }</span>
                        </div>
                        <h3 class="font-bold text-gray-800">${
                          entry.title || "Sin t√≠tulo"
                        }</h3>
                        <p class="text-sm text-gray-600 mt-1">${(
                          entry.content || ""
                        ).substring(0, 100)}...</p>
                        <div class="flex items-center justify-between mt-2 text-xs text-gray-500">
                            <span>üë§ ${entry.author || "Sin autor"}</span>
                            <span>üìÖ ${
                              entry.createdAt
                                ? new Date(entry.createdAt).toLocaleDateString()
                                : "Sin fecha"
                            }</span>
                        </div>
                    </div>
                `
            )
            .join("");
        }
      }

      // Inicializar al cargar la p√°gina
      document.addEventListener("DOMContentLoaded", function () {
        updateStatus();
      });
    </script>
  </body>
</html>
